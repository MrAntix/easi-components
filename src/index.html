<!DOCTYPE html>
<html dir="ltr"
      lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0">
  <title>EASI Components</title>
  <link rel="icon"
        type="image/svg+xml"
        href="/assets/a.svg">

  <script type="module"
          src="/build/antix-easi-components.esm.js"></script>
  <script nomodule
          src="/build/antix-easi-components.esm.js"></script>

  <link rel="stylesheet"
        type="text/css"
        href="/build/antix-easi-components.css" />
  <style>
    body {
      background: var(--easi-primary-alt);
      color: var(--easi-primary);
      font-size: 15px;
      margin: 0;
      padding: var(--easi-unit);
    }

    section{
      display: flex;
      flex-wrap: wrap;
    }

    .properties label {
      display: inline-block;
      width: 10rem;
    }
  </style>

</head>

<body>

  <h1>EASI Components</h1>

  <p>
    <code>
    &lt;a-easi
    <label>show-text
      <input type="checkbox"
            bind
            [checked]="show-text"
            {change}="onChange" change="show-text" />
    </label>
    /&gt;
    </code>
  </p>

  <a-easi bind
          [show-text]="show-text"
          [value]="easi"
          {change}="onChange"
          {score-change}="onChange"
          scorechange="score"></a-easi>

  <section>
    <div class="properties">
      <p><label>--easi-unit</label>
        <input type="range"
               min="0"
               max="1"
               step=".05"
               bind
               units="rem"
               [value]="unit"
               {input}="onChangeStyle" />
        <span bind
              [inner-text]="unit"></span>rem
      </p>
      <p><label>--easi-primary-hue</label>
        <input type="range"
               min="0"
               max="360"
               bind
               [value]="primary-hue"
               {input}="onChangeStyle" />
        <span bind
              [inner-text]="primary-hue"></span>
      </p>
      <p><label>--easi-primary-saturation</label>
        <input type="range"
               min="0"
               max="100"
               bind
               units="%"
               [value]="primary-saturation"
               {input}="onChangeStyle" />
        <span bind
              [inner-text]="primary-saturation"></span>%
      </p>
      <p><label>--easi-grid-gap</label>
        <input type="range"
               min="0"
               max="10"
               bind
               units="px"
               [value]="grid-gap"
               {input}="onChangeStyle" />
        <span bind
              [inner-text]="grid-gap"></span>px
      </p>
      <p><label>--easi-border-radius</label>
        <input type="range"
               min="0"
               max="20"
               bind
               units="px"
               [value]="border-radius"
               {input}="onChangeStyle" />
        <span bind
              [inner-text]="border-radius"></span>px
      </p>
      <p><label>--easi-border-width</label>
        <input type="range"
               min="0"
               max="10"
               bind
               units="px"
               [value]="border-width"
               {input}="onChangeStyle" />
        <span bind
              [inner-text]="border-width"></span>px
      </p>
      <p><label>--easi-panel-border-width</label>
        <input type="range"
               min="0"
               max="10"
               bind
               units="px"
               [value]="panel-border-width"
               {input}="onChangeStyle" />
        <span bind
              [inner-text]="panel-border-width"></span>px
      </p>
      <p><label>--easi-panel-shadow-dist</label>
        <input type="range"
               min="0"
               max="40"
               bind
               units="px"
               [value]="panel-shadow-dist"
               {input}="onChangeStyle" />
        <span bind
              [inner-text]="panel-shadow-dist"></span>px
      </p>
    </div>
      <p>Value:
        <pre bind
             [inner-html]="easiJSON"></pre>
      </p>
      <p>Score:
        <pre bind
             [inner-html]="scoreJSON"></pre>
      </p>
  </section>

  <p>
    <code>
    &lt;a-easi-ernie
    /&gt;
    </code>
  </p>
  <a-easi-ernie bind
                [value]="easi"></a-easi-ernie>

  <p>
    <code>
    &lt;a-easi-severity
    <label>show-text
      <input type="checkbox"
            bind
            [checked]="severity-show-text"
            {change}="onChange" change="severity-show-text" />
    </label>
    /&gt;
    </code>
  </p>
  <a-easi-severity bind
                   [show-text]="severity-show-text"
                   [value]="severity"
                   {change}="onChange"></a-easi-severity>
  <p>Value: <span bind
          [inner-text]="severity"></span></p>

  <p>
    <code>
    &lt;a-easi-extent
    <label>show-text
      <input type="checkbox"
            bind
            [checked]="extent-show-text"
            {change}="onChange" change="extent-show-text" />
    </label>
    /&gt;
    </code>
  </p>
  <a-easi-extent bind
                 [show-text]="extent-show-text"
                 [value]="extent"
                 {change}="onChange"></a-easi-extent>
  <p>Value: <span bind
          [inner-text]="extent"></span></p>

  <p>A very useful
    <a href="http://www.homeforeczema.org/documents/easi-user-guide-jan-2017-v3.pdf">Guide on EASI</a>
  </p>

  <script type="module">
    import { bind } from './libs/bind/bind.js';

    const context = {
      easi: null,
      score: null,
      extent: 0,
      severity: 2,

      onChange: function (e) {
        let contextProperty = this.getAttribute(e.type)
          || this.getAttribute('[value]');

        context[contextProperty] = e.detail === undefined ? e.target.checked : e.detail;
        context[`${contextProperty}JSON`] = JSON.stringify(e.detail, null, 2);
      },

      'show-text': true,
      'unit': .5,
      'primary-hue': 210,
      'primary-saturation': 0,
      'grid-gap': 1,
      'border-radius': 5,
      'border-width': 0,
      'panel-border-width': 0,
      'panel-shadow-dist': 0,
      onChangeStyle: function () {
        const property = this.getAttribute('property') || '[value]';
        const propertyName = this.getAttribute(property);
        if (!propertyName) throw `${property} not set`;

        const units = this.getAttribute('units') || '';

        context[propertyName] = this.value;
        document.documentElement.style.setProperty(`--easi-${propertyName}`, `${this.value}${units}`);
      }
    }

    bind(document.body, context);

  </script>

</body>

</html>
