<!DOCTYPE html>
<html dir="ltr"
      lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0">
  <title>EASI Components</title>
  <link rel="icon"
        type="image/svg+xml"
        href="/assets/a.svg">

  <script type="module"
          src="/build/antix-easi-components.esm.js"></script>
  <script nomodule
          src="/build/antix-easi-components.esm.js"></script>

  <link rel="stylesheet"
        type="text/css"
        href="/build/antix-easi-components.css" />
  <style>
    :root {
      --unit: 4px;
      --lowlight: rgba(0, 0, 0, .1);
    }

    body {
      background: #ddd;
      color: #444;
      font-size: 15px;
      margin: 0;
      padding: var(--unit);
    }


    .row {
      display: flex;
      flex-wrap: wrap;
      margin: calc(-1 * var(--unit));
    }

    .col,
    .row>div {
      display: flex;
      flex-direction: column;
      padding: var(--unit);
    }

    pre {
      font-size: .7em;
      padding: var(--unit);
      background-color: var(--lowlight);
    }

    p {
      padding: var(--unit);
      margin: 0;
    }

    .properties label {
      display: inline-block;
      width: 10rem;
    }
  </style>

</head>

<body>

  <h1>EASI Components</h1>

  <article>
    <header>
      <code>
      &lt;a-easi
      <label>show-text
        <input type="checkbox"
              bind
              [checked]="show-text"
              {change}="onChange" change="show-text" />
      </label>
      /&gt;
      </code>
    </header>

    <a-easi bind
            [show-text]="show-text"
            [value]="easi"
            {change}="onChange"
            {score-change}="onChange"
            scorechange="score"></a-easi>

    <footer class="row">
      <div class="properties">
        <div><label>--easi-unit</label>
          <input type="range"
                 min="0"
                 max="1"
                 step=".05"
                 bind
                 units="rem"
                 [value]="unit"
                 {input}="onChangeStyle" />
          <span bind
                [inner-text]="unit"></span>rem
        </div>
        <div><label>--easi-primary-hue</label>
          <input type="range"
                 min="0"
                 max="360"
                 bind
                 [value]="primary-hue"
                 {input}="onChangeStyle" />
          <span bind
                [inner-text]="primary-hue"></span>
        </div>
        <div><label>--easi-primary-saturation</label>
          <input type="range"
                 min="0"
                 max="100"
                 bind
                 units="%"
                 [value]="primary-saturation"
                 {input}="onChangeStyle" />
          <span bind
                [inner-text]="primary-saturation"></span>%
        </div>
        <div><label>--easi-primary-lightness</label>
          <input type="range"
                 min="0"
                 max="100"
                 bind
                 units="%"
                 [value]="primary-lightness"
                 {input}="onChangeStyle" />
          <span bind
                [inner-text]="primary-lightness"></span>%
        </div>
        <div><label>--easi-grid-gap</label>
          <input type="range"
                 min="0"
                 max="10"
                 bind
                 units="px"
                 [value]="grid-gap"
                 {input}="onChangeStyle" />
          <span bind
                [inner-text]="grid-gap"></span>px
        </div>
        <div><label>--easi-border-radius</label>
          <input type="range"
                 min="0"
                 max="20"
                 bind
                 units="px"
                 [value]="border-radius"
                 {input}="onChangeStyle" />
          <span bind
                [inner-text]="border-radius"></span>px
        </div>
        <div><label>--easi-border-width</label>
          <input type="range"
                 min="0"
                 max="10"
                 bind
                 units="px"
                 [value]="border-width"
                 {input}="onChangeStyle" />
          <span bind
                [inner-text]="border-width"></span>px
        </div>
        <hr />
        <div><label>--easi-ernie-hue</label>
          <input type="range"
                 min="0"
                 max="360"
                 bind
                 [value]="ernie-hue"
                 {input}="onChangeStyle" />
          <span bind
                [inner-text]="ernie-hue"></span>
        </div>
        <div><label>--easi-ernie-border-width</label>
          <input type="range"
                 min="0"
                 max="10"
                 bind
                 units="px"
                 [value]="ernie-border-width"
                 {input}="onChangeStyle" />
          <span bind
                [inner-text]="ernie-border-width"></span>px
        </div>
        <hr />
        <div><label>--easi-panel-border-width</label>
          <input type="range"
                 min="0"
                 max="10"
                 bind
                 units="px"
                 [value]="panel-border-width"
                 {input}="onChangeStyle" />
          <span bind
                [inner-text]="panel-border-width"></span>px
        </div>
        <div><label>--easi-panel-shadow-dist</label>
          <input type="range"
                 min="0"
                 max="40"
                 bind
                 units="px"
                 [value]="panel-shadow-dist"
                 {input}="onChangeStyle" />
          <span bind
                [inner-text]="panel-shadow-dist"></span>px
        </div>
      </div>
      <div>
        <p>Value</p>
        <pre bind
             [inner-html]="easiJSON"></pre>
      </div>
      <div>
        <p>Score</p>
        <pre bind
             [inner-html]="scoreJSON"></pre>
      </div>
    </footer>

  </article>

  <article>
    <header>
      <code>
          &lt;a-easi-select
          /&gt;
          </code>
    </header>

    <a-easi-select bind
                   [show-text]="show-text"
                   [options]="selectOptions"
                   [options-text]="selectOptionsText"
                   [value]="selectValue"
                   {change}="onChange"></a-easi-select>

    <footer class="row">
      <div>
        <p>Value</p>
        <pre bind
             [inner-html]="selectValueJSON"></pre>
      </div>
    </footer>

  </article>

  <article>
    <header>
      <code>
      &lt;a-easi-ernie
      /&gt;
      </code>
    </header>
    <a-easi-ernie bind
                  [value]="easi"></a-easi-ernie>

  </article>


  <div>A very useful
    <a href="http://www.homeforeczema.org/documents/easi-user-guide-jan-2017-v3.pdf">Guide on EASI</a>
  </div>

  <script type="module">
    import { bind } from './libs/bind/bind.js';

    const context = {
      easi: null,
      score: null,

      onChange: function (e) {
        let contextProperty = this.getAttribute(e.type)
          || this.getAttribute('[value]');

        context[contextProperty] = e.detail === undefined ? e.target.checked : e.detail;
        context[`${contextProperty}JSON`] = JSON.stringify(e.detail, null, 2);
      },

      selectOptions: [true, false],
      selectOptionsText: { 'true': 'True', 'false': 'False' },

      'show-text': true,
      'unit': .5,
      'primary-hue': 210,
      'primary-saturation': 0,
      'primary-lightness': 40,
      'grid-gap': 1,
      'border-radius': 5,
      'border-width': 0,
      'ernie-hue': null,
      'ernie-border-width': 3,
      'panel-border-width': 0,
      'panel-shadow-dist': 0,
      onChangeStyle: function () {
        const property = this.getAttribute('property') || '[value]';
        const propertyName = this.getAttribute(property);
        if (!propertyName) throw `${property} not set`;

        const units = this.getAttribute('units') || '';

        context[propertyName] = this.value;
        document.documentElement.style.setProperty(`--easi-${propertyName}`, `${this.value}${units}`);
      }
    }

    bind(document.body, context);

  </script>

</body>

</html>
