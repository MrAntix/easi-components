<!DOCTYPE html>
<html dir="ltr"
      lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0">
  <title>EASI Components</title>
  <link rel="icon" type="image/svg+xml" href="/assets/a.svg">

  <script type="module"
          src="/build/antix-easi-components.esm.js"></script>
  <script nomodule
          src="/build/antix-easi-components.esm.js"></script>

  <link rel="stylesheet"
        type="text/css"
        href="/build/antix-easi-components.css" />
  <style>
    :root {
      --easi-unit: .5em;
      --easi-primary-hue: 210;
      --easi-primary-saturation: 0%;
      --easi-ernie-hue: 30;

      --easi-border-radius: 0px;
      --easi-grid-gap: 4px;
    }

    body {
      background: var(--easi-primary-alt);
      color: var(--easi-primary);
      font-size: 15px;
      margin: 0;
      padding: var(--easi-unit);
    }

    .properties label {
      display: inline-block;
      width: 12rem;
    }
  </style>

</head>

<body>

  <h1>EASI Components</h1>

  <p>
    <code>
    &lt;a-easi
      <label>show-text
        <input type="checkbox"
              bind
              property="checked"
              [checked]="show-text"
              {change}="onChange" />
      </label>/&gt;
    </code>
  </p>

  <a-easi bind
          [show-text]="show-text"
          [value]="score"
          {change}="onChange"></a-easi>

  <div class="properties">
    <p><label>--easi-primary-hue</label>
      <input type="range"
             min="0"
             max="360"
             bind
             [value]="primary-hue"
             {input}="onChangeValue" />
      <span bind
            [inner-text]="primary-hue"></span>
    </p>
    <p><label>--easi-primary-saturation</label>
      <input type="range"
             min="0"
             max="100"
             bind
             units="%"
             [value]="primary-saturation"
             {input}="onChangeValue" />
      <span bind
            [inner-text]="primary-saturation"></span>
    </p>
    <p><label>--easi-border-radius</label>
      <input type="range"
             min="0"
             max="20"
             bind
             units="px"
             [value]="border-radius"
             {input}="onChangeValue" />
      <span bind
            [inner-text]="border-radius"></span>
    </p>
    <p><label>--easi-border-width</label>
      <input type="range"
             min="0"
             max="10"
             bind
             units="px"
             [value]="border-width"
             {input}="onChangeValue" />
      <span bind
            [inner-text]="border-width"></span>
    </p>
    <p><label>--easi-panel-border-width</label>
      <input type="range"
             min="0"
             max="10"
             bind
             units="px"
             [value]="panel-border-width"
             {input}="onChangeValue" />
      <span bind
            [inner-text]="panel-border-width"></span>
    </p>
    <p><label>--easi-panel-shadow-dist</label>
      <input type="range"
             min="0"
             max="40"
             bind
             units="px"
             [value]="panel-shadow-dist"
             {input}="onChangeValue" />
      <span bind
            [inner-text]="panel-shadow-dist"></span>
    </p>
  </div>
  <p>Value:
    <pre bind
         [inner-html]="scoreJSON"></pre>
  </p>

  <!--
  <h2>a-easi-ernie</h2>
  <a-easi-ernie trunk="5" head="10"></a-easi-ernie>

  <h2>a-easi-severity</h2>
  <a-easi-severity bind
                   [value]="severity"
                   {change}="onChange"></a-easi-severity>
  <p>Value: <span bind
          [inner-text]="severity"></span></p>

  <h2>a-easi-extent</h2>
  <a-easi-extent bind
                 [value]="extent"
                 {change}="onChange"></a-easi-extent>
  <p>Value: <span bind
          [inner-text]="extent"></span></p>
  -->

  <p>A very useful
    <a href="http://www.homeforeczema.org/documents/easi-user-guide-jan-2017-v3.pdf">Guide on EASI</a>
  </p>

  <script type="module">
    import { bind } from './libs/bind/bind.js';

    const context = {
      score: null,
      extent: 0,
      severity: 2,

      onChange: function (e) {
        const property = this.getAttribute('property') || 'value';
        const propertyName = this.getAttribute(`[${property}]`);
        if (!propertyName) throw `${property} not set`;

        context[propertyName] = this[property];
        context[`${propertyName}JSON`] = JSON.stringify(e.detail, null, 2);
      },

      'show-text': true,
      'primary-hue': 210,
      'primary-saturation': 0,
      'border-radius': 0,
      'border-width': 0,
      'panel-border-width': 0,
      'panel-shadow-dist': 0,
      onChangeValue: function () {
        const property = this.getAttribute('property') || '[value]';
        const propertyName = this.getAttribute(property);
        if (!propertyName) throw `${property} not set`;

        const units = this.getAttribute('units') || '';

        context[propertyName] = this.value;
        document.documentElement.style.setProperty(`--easi-${propertyName}`, `${this.value}${units}`);
      }
    }

    bind(document.body, context);

  </script>

</body>

</html>
